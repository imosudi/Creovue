{% extends "base.html" %}

{% block title %}Thumbnail Evaluation Summary | Creovue{% endblock %}

{% block styles %}
{{ super() }}
<style>
  .summary-card {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 25px;
  }
  .summary-header {
    font-weight: bold;
    font-size: 1.25rem;
    color: #3e6fbd;
    margin-bottom: 10px;
  }
  .metric-badge {
    font-size: 0.95rem;
    padding: 4px 10px;
    border-radius: 20px;
    margin-right: 6px;
  }
  .recommendation {
    font-size: 0.95rem;
    padding: 8px 12px;
    border-radius: 6px;
    background-color: #f8f9fa;
    margin-top: 8px;
  }
  .overlay-image {
    max-width: 100%;
    border: 1px solid #ccc;
    border-radius: 8px;
  }
</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">ðŸ“Š Thumbnail Evaluation Summary</h2>

  <div class="row">
    <div class="col-lg-6">
      <div class="summary-card">
        <div class="summary-header">ðŸ‘¤ Face Detection</div>
        <p>Faces Detected: <strong>{{ face_count }}</strong></p>
        {% if face_image_url %}
          <img src="{{ face_image_url }}" class="overlay-image" alt="Face Detection Result">
        {% endif %}
      </div>
    </div>

    <div class="col-lg-6">
      <div class="summary-card">
        <div class="summary-header">ðŸŽ¨ Colour Heatmap</div>
        {% if heatmap_url %}
          <img src="{{ heatmap_url }}" class="overlay-image" alt="Heatmap">
        {% endif %}
      </div>
    </div>

    <div class="col-lg-6">
      <div class="summary-card">
        <div class="summary-header">ðŸ”  Text Detection</div>
        <p>Text Count: <strong>{{ text_count }}</strong></p>
        <!--p>Density: <strong>{#{ text_ratio|round(2) * 100 }#}%</strong></p-->
        <p>Density: <strong>{{ (text_ratio | default(0)) | round(2) * 100 }}%</strong></p>
        {% if text_overlay_url %}
          <img src="{{ text_overlay_url }}" class="overlay-image" alt="Text Overlay">
        {% endif %}
        <div class="recommendation mt-2">{{ text_recommendation }}</div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="summary-card">
        <div class="summary-header">ðŸ“ˆ CTR Prediction</div>
        <h4 class="text-success">Predicted CTR Score: {{ ctr_score }}/10</h4>
        <ul class="list-group mt-3">
          {% for item in ctr_feedback %}
            <li class="list-group-item small">{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
