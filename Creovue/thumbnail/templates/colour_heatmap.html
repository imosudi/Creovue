<!-- Creovue/thumbnail_eval/templates/colour_heatmap.html -->
{% extends 'dashboard_base.html' %}

{% block title %}Colour Heatmap | Creovue{% endblock %}
{% block page_header %}  <i class="bi bi-palette2 text-primary"></i>  Thumbnail Colour Heatmap {% endblock %}
{% block dashboard_main %}
<!-- Top Bar -->

<div class="container-fluid py-4">

  <div class="card metric-card h-100 p-4">
    <form id="upload-form" method="POST" enctype="multipart/form-data" class="dropzone-area border p-4 mb-3" style="text-align:center">
      <p>ðŸ“‚ Drag & drop or click to upload a thumbnail</p>
      <input type="file" name="thumbnail" id="file-input" accept="image/*" hidden onchange="previewImage(this)">
      <button type="button" class="btn btn-secondary" onclick="document.getElementById('file-input').click()">Choose File</button>
      <button type="submit" class="btn btn-primary mt-2">Generate Heatmap</button>
    </form>
  </div>

  <div class="row mt-4">
    {% if image_url %}
    <div class="col-md-6">
      <h5>ðŸ“· Original Image</h5>
      <img src="{{ image_url }}" class="img-fluid border rounded">
    </div>
    {% endif %}
    {% if heatmap_url %}
    <div class="col-md-6">
      <h5>ðŸ”¥ Heatmap</h5>
      <img src="{{ heatmap_url }}" class="img-fluid border rounded">
    </div>
    {% endif %}
  </div>
</div>

<script>
function previewImage(input) {
  const file = input.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const img = document.createElement("img");
      img.src = e.target.result;
      img.className = "img-fluid border rounded my-2";
      const previewDiv = document.querySelector(".dropzone-area");
      previewDiv.appendChild(img);
    };
    reader.readAsDataURL(file);
  }
}
</script>
{% endblock %}
